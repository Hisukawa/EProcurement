import{b as F,a as r,j as e,H as L,c as f}from"./app-CtTXRvSW.js";import{A as V}from"./AdminLayout-BexuSpzd.js";import{D as E,a as O,b as k,c as w,d as D,e as M}from"./dialog-Bx8Sq_PR.js";import{B as o}from"./button-BXv_ZNaU.js";import{C as g,a as j,b as N,c as v}from"./card-CZuNdCjn.js";import{I as z}from"./input-C6sjfcxT.js";import{u as G}from"./use-toast-n7ss-q37.js";import{B as J}from"./building-2-CsUuaA8a.js";import{c as K}from"./createLucideIcon-BS5JQiMA.js";import{C as Q}from"./clipboard-list-DHscdgrA.js";import"./Dropdown-BOTfWPms.js";import"./transition-CwMeo9Sp.js";import"./toaster-BHX75O9a.js";import"./index-Bhk03iWx.js";import"./index-Dow8KyZk.js";import"./utils-_QWm-tM-.js";import"./index-ClPfL8xw.js";import"./users-t4wgiIdf.js";import"./index-B2vGw--Q.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],X=K("users-round",W);function fe({divisions:m,inspectionCommittees:p,bacCommittees:d}){var C;const{props:q}=F(),n=(C=q.flash)==null?void 0:C.success,{toast:h}=G(),[B,x]=r.useState(!1),[I,c]=r.useState(!1),[t,y]=r.useState(null),[l,b]=r.useState(""),[a,u]=r.useState({name:""});r.useEffect(()=>{n&&x(!0)},[n]);const R=()=>{t&&f.post(route("admin.update_inspection",t.inspection_committee_id),{member_id:t.id,replacementName:a.name},{preserveScroll:!0,onSuccess:()=>{h({title:"✅ Member Replaced",description:"Inspection Committee updated successfully!",duration:3e3}),c(!1)},onError:s=>{h({title:"❌ Replace Failed",description:"Check the input and try again.",variant:"destructive",duration:4e3})}})},S=(s,i)=>{console.log("Editing member:",s,"of type:",i),y(s),b(i),u({member_id:s.id,name:s.name,position:s.position}),c(!0)};console.log("Bac Committees:",d);const T=()=>{t&&(l==="bac"?f.post(route("admin.update_bac",{id:t.committee_id??1}),{members:[{member_id:a.member_id,name:a.name,position:a.position}]},{preserveScroll:!0}):l==="inspection"?R():l==="requesting"&&f.post(route("admin.update_requesting",{division:t.id}),{name:a.name},{preserveScroll:!0}),c(!1))};r.useEffect(()=>{n&&(h({title:"✅ Success",description:n}),x(!0))},[n]);const U=m!=null&&m.length?m:[],H=p!=null&&p.length?p:[],P=d!=null&&d.length?d:[],A=s=>({chair:"Chair",vice_chair:"Vice Chair",secretariat:"Secretariat",member1:"Member",member2:"Member",member3:"Member"})[s]||s;return e.jsxs(V,{header:"⚙️ System Settings",children:[e.jsx(L,{title:"Settings"}),e.jsxs("div",{className:"max-w-6xl mx-auto mt-6 space-y-12",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"System Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage signatories and officers for various departments and committees."})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-700 flex items-center gap-2 mb-4",children:[e.jsx(J,{className:"w-5 h-5"}),"Division Officers"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(s=>e.jsxs(g,{className:"hover:shadow-lg transition",children:[e.jsx(j,{children:e.jsx(N,{className:"text-blue-600",children:s.division})}),e.jsxs(v,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Officer"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.active_officer?s.active_officer.name:"No active officer"}),e.jsx(o,{variant:"outline",className:"mt-4 w-full",onClick:()=>{var i;y(s),b("requesting"),u({name:((i=s.active_officer)==null?void 0:i.name)||""}),c(!0)},children:"Update Officer"})]})]},s.id))})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-green-700 flex items-center gap-2 mb-4",children:[e.jsx(X,{className:"w-5 h-5"}),"Inspection Team"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(s=>e.jsxs(g,{className:"hover:shadow-lg transition",children:[e.jsx(j,{children:e.jsx(N,{className:"text-green-600",children:s.position})}),e.jsxs(v,{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx(o,{variant:"outline",className:"mt-4 w-full",onClick:()=>S(s,"inspection"),children:"Edit"})]})]},s.id))})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-purple-700 flex items-center gap-2 mb-4",children:[e.jsx(Q,{className:"w-5 h-5"}),"BAC Committee"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.sort((s,i)=>{const _=["chair","vice_chair","secretariat","member1","member2","member3"];return _.indexOf(s.position)-_.indexOf(i.position)}).map(s=>e.jsxs(g,{className:"hover:shadow-lg transition",children:[e.jsx(j,{children:e.jsx(N,{className:"text-purple-600",children:A(s.position)})}),e.jsxs(v,{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx(o,{variant:"outline",className:"mt-4 w-full",onClick:()=>S(s,"bac"),children:"Edit"})]})]},s.id))})]})]}),e.jsx(E,{open:B,onOpenChange:x,children:e.jsxs(O,{children:[e.jsxs(k,{children:[e.jsx(w,{children:"✅ Success"}),e.jsx(D,{children:n})]}),e.jsx(M,{children:e.jsx(o,{onClick:()=>x(!1),children:"Close"})})]})}),e.jsx(E,{open:I,onOpenChange:c,children:e.jsxs(O,{children:[e.jsxs(k,{children:[e.jsx(w,{children:l==="requesting"?"Update Officer":"Edit Committee Member"}),e.jsx(D,{children:l==="requesting"?"Update the requisitioning officer for this division.":"Update the committee member’s name below."})]}),e.jsxs("div",{className:"space-y-4",children:[l!=="requesting"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Position"}),e.jsx("p",{className:"font-medium text-gray-800",children:t==null?void 0:t.position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Name"}),e.jsx(z,{value:a.name,onChange:s=>u({...a,name:s.target.value})})]})]}),e.jsxs(M,{children:[e.jsx(o,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(o,{onClick:T,children:"Save Changes"})]})]})})]})}export{fe as default};
