import{u as _,a as w,j as e,H as S}from"./app-DIvhqflN.js";import{S as I}from"./SupplyOfficerLayout-BFsfCYNW.js";import{P as A}from"./printer-check-QUEoR6lB.js";import"./toaster-BG0km8U8.js";import"./use-toast-DOzsFwf_.js";import"./index-rNSkqM9E.js";import"./index-sHCL6Saa.js";import"./createLucideIcon-BlLWWl-g.js";import"./utils-DmZEVKAZ.js";import"./index-CjTI4XxM.js";import"./Dropdown-DNA0O0Ar.js";import"./transition-CN94-6cg.js";import"./XMarkIcon-Bt_pR51W.js";import"./clipboard-check-DnxB_nG6.js";import"./package-check-Df_j4h1-.js";import"./trash-DBn7V5Nr.js";function J({iarData:o,filters:v}){const{data:n,setData:N,get:d}=_({search:v.search||""});return console.log(o),w.useEffect(()=>{const t=setTimeout(()=>{d(route("supply_officer.iar_table"),{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[n.search]),e.jsxs(I,{header:"Schools Divisions Office - Ilagan | Inspection and Acceptance Reports",children:[e.jsx(S,{title:"Inspection and Acceptance Reports"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Inspection and Acceptance Reports"}),e.jsx("form",{onSubmit:t=>t.preventDefault(),className:"flex gap-3",children:e.jsx("input",{type:"text",name:"search",placeholder:"Search IAR number or supplier",className:"w-80 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:n.search,onChange:t=>N("search",t.target.value)})})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white",children:e.jsxs("table",{className:"w-full table-auto text-sm divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["IAR Number","Division","Items","Suppliers","Total Price","Inspected By","Actions"].map(t=>e.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-600 uppercase tracking-wide text-center",children:t},t))})}),e.jsx("tbody",{className:"divide-y divide-gray-100 text-center",children:(()=>{var i;if(!((i=o==null?void 0:o.data)!=null&&i.length))return e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-12 text-gray-500 text-lg font-medium",children:"No Inspection Reports found."})});const t=o.data.reduce((s,r)=>{var l,u,m,x,h,f,y,g;const a=r.iar_number;s[a]||(s[a]={header:r,specs:[],supplier:((u=(l=r.purchase_order)==null?void 0:l.supplier)==null?void 0:u.company_name)??"N/A",division:((f=(h=(x=(m=r.purchase_order)==null?void 0:m.rfq)==null?void 0:x.purchase_request)==null?void 0:h.division)==null?void 0:f.division)??"N/A",totalPrice:0}),(g=(y=r.purchase_order)==null?void 0:y.details)!=null&&g.length?r.purchase_order.details.forEach(b=>{var j;(j=b.pr_detail)!=null&&j.specs&&s[a].specs.push(b.pr_detail.specs)}):r.specs&&s[a].specs.push(r.specs);const c=parseFloat(r.quantity_received)||0,p=parseFloat(r.unit_price)||0;return s[a].totalPrice+=c*p,s},{});return console.log(t),Object.values(t).map(({header:s,specs:r,supplier:a,division:c,totalPrice:p})=>{const l=r.length>1?`${r[0]} +${r.length-1} more`:r[0]||"N/A";return e.jsxs("tr",{className:"hover:bg-blue-50 transition duration-200",children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-blue-700 whitespace-nowrap",children:s.iar_number}),e.jsx("td",{className:"px-6 py-4",children:c}),e.jsx("td",{className:"px-6 py-4",children:l}),e.jsx("td",{className:"px-6 py-4",children:a}),e.jsxs("td",{className:"px-6 py-4",children:["â‚± ",p.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:s.inspected_by}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("a",{href:route("supply_officer.print_iar",s.id),className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition flex items-center justify-center gap-1",target:"_blank",children:[e.jsx(A,{size:16})," Print"]})})]},s.iar_number)})})()})]})}),e.jsx("div",{className:"mt-6 flex justify-center flex-wrap gap-1",children:o.links.map((t,i)=>e.jsx("button",{disabled:!t.url,onClick:()=>t.url&&d(t.url,{data:n,preserveState:!0,preserveScroll:!0}),className:`px-3 py-1 text-sm border rounded-md ${t.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,dangerouslySetInnerHTML:{__html:t.label}},i))})]})}export{J as default};
