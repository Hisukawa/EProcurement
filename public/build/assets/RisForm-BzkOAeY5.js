import{v as _,r as I,j as e,$ as D}from"./app-BQhz_IN4.js";import{S as C}from"./SupplyOfficerLayout-BdcVmf_W.js";import{D as q,a as O,b as $,c as A,d as E,e as F}from"./dialog-DHI0HyLa.js";import{B as j}from"./button-DtbvuUYM.js";import{u as z}from"./toaster-BFyD_Apk.js";import{F as B}from"./file-text-DC--1Jlv.js";import{S as T}from"./send-horizontal-Dczn0IS5.js";import"./Dropdown-mkl4n6Wg.js";import"./transition-DRM6tSfR.js";import"./XMarkIcon-FRLyum_P.js";import"./clipboard-check-Dnb4CtNI.js";import"./index-CNT1inxt.js";import"./index-DNLdNOJA.js";import"./index-CpF6nZYe.js";import"./index-CWZG2RZX.js";function se({purchaseOrder:l,inventoryItem:y,user:f}){var x,p,b,h,g;const t=l.detail,s=(x=t==null?void 0:t.pr_detail)==null?void 0:x.purchase_request,o=(p=t==null?void 0:t.pr_detail)==null?void 0:p.product,d=s?`${s.focal_person.firstname} ${s.focal_person.middlename} ${s.focal_person.lastname}`:"N/A",{data:a,setData:n,post:v,processing:m,errors:c}=_({po_id:l.id,ris_number:l.po_number,issued_to:(b=s==null?void 0:s.focal_person)==null?void 0:b.id,issued_by:f.id,remarks:"",items:[{inventory_item_id:y.id,quantity:""}]}),N=o?`${o.name} (${o.specs})`:"N/A",[w,i]=I.useState(!1),{toast:u}=z(),S=r=>{r.preventDefault(),i(!0)},k=()=>{v(route("supply_officer.store_ris"),{preserveScroll:!0,onSuccess:()=>{i(!1),u({title:"RIS Recorded",description:"Requisition and Issue Slip successfully saved!",duration:3e3})},onError:()=>{u({title:"Save Failed",description:"Please review inputs and try again.",variant:"destructive",duration:4e3})}})};return e.jsxs(C,{header:"Schools Divisions Office - Ilagan | Requisition and Issue Slip",children:[e.jsx(D,{title:"RIS Form"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 bg-white text-blue-800 border border-blue-300 text-sm font-semibold rounded-md hover:bg-blue-100 hover:border-blue-400 mr-4 mb-4 shadow-sm transition",children:"← Back"}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsxs("h2",{className:"text-3xl font-bold text-blue-800 mb-1 flex items-center gap-2",children:[e.jsx(B,{size:24})," Requisition and Issue Slip (RIS)"]}),Object.keys(c).length>0&&e.jsx("div",{className:"col-span-2 bg-red-100 text-red-700 p-4 rounded mb-4",children:e.jsx("ul",{className:"list-disc list-inside",children:Object.entries(c).map(([r,R])=>e.jsx("li",{children:R},r))})}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:[e.jsx("strong",{children:"Note:"})," This item is categorized as"," ",e.jsx("em",{children:"Consumable"})," and will be issued using a RIS form."]}),e.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-5 border rounded-md bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:"Requisition"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Designation"}),e.jsx("input",{value:((h=s==null?void 0:s.division)==null?void 0:h.division)??"N/A",readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"RIS No."}),e.jsx("input",{type:"text",placeholder:"RIS Number",value:a.ris_number,onChange:r=>n("ris_number",r.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("input",{value:N,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Requested"}),e.jsx("input",{value:((g=t==null?void 0:t.pr_detail)==null?void 0:g.quantity)??"N/A",readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Available?"}),e.jsx("input",{value:"Yes",readOnly:!0,className:"w-full mt-1 px-3 py-2 border rounded-md shadow-sm border-green-400 bg-green-50"})]})]})]})]}),e.jsxs("div",{className:"p-5 border rounded-md bg-green-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-4",children:"Issuance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity to Issue"}),e.jsx("input",{type:"text",value:a.items[0].quantity,onChange:r=>n("items",[{...a.items[0],quantity:r.target.value}]),placeholder:"Enter quantity to issue",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested By"}),e.jsx("input",{type:"text",value:d,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Recipient"}),e.jsx("input",{type:"text",value:d,placeholder:"Enter recipient name",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),e.jsx("textarea",{type:"text",value:a.remarks,onChange:r=>n("remarks",r.target.value),rows:"4",placeholder:"Enter remarks (optional)",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]})]})]}),e.jsx("div",{className:"col-span-full flex justify-end mt-4",children:e.jsxs("button",{type:"submit",className:"inline-flex items-center px-6 py-2 bg-blue-700 text-white text-sm font-medium rounded-md hover:bg-blue-800 transition",disabled:m,children:[e.jsx(T,{size:16,className:"mr-2"}),m?"Saving...":"Submit Issuance"]})})]})]}),e.jsx(q,{open:w,onOpenChange:i,children:e.jsxs(O,{className:"sm:max-w-md",children:[e.jsxs($,{children:[e.jsx(A,{children:"Confirm Issuance"}),e.jsx(E,{children:"Are you sure you want to record this RIS issuance?"})]}),e.jsxs(F,{className:"mt-4",children:[e.jsx(j,{variant:"secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx(j,{onClick:k,children:"Yes, Record RIS"})]})]})})]})}export{se as default};
