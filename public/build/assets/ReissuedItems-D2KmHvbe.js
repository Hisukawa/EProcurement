import{u as _,a as S,j as e,H as I,L as D,c as C}from"./app-B7_UX2sh.js";import{u as k}from"./use-toast-B7jOcQUg.js";import{D as P,a as E,b as F,c as H,d as L,e as O}from"./dialog-DohJNFeT.js";import{B as b}from"./button-BPZKlegq.js";import{S as T}from"./SupplyOfficerLayout-CdxnHeI-.js";import{P as $}from"./printer-check-DwhnrCjF.js";import"./index-Ddce4cKg.js";import"./index-Dbmq-qNg.js";import"./createLucideIcon-Bz5E4J9E.js";import"./utils-3YMp73RZ.js";import"./index-C9v5eIVZ.js";import"./toaster-CYWm_-9N.js";import"./index-BbZGCgbR.js";import"./Dropdown-Cr-ssEUb.js";import"./transition-CrNCWD_V.js";import"./XMarkIcon-5mCUXE4W.js";import"./clipboard-check-D0FUKkmt.js";import"./package-check-CFNsEoSM.js";import"./trash-VPgIQcbO.js";function ie({filters:t,records:r,user:B}){var o;const{data:f,setData:c}=_({search:(t==null?void 0:t.search)||"",page:(t==null?void 0:t.page)||1}),[N,d]=S.useState(!1),{toast:v}=k(),w=()=>{v({title:"RIS Recorded",description:"Requisition and Issue Slip successfully saved!",duration:3e3,className:"bg-green-600 text-white"}),d(!1)},R=s=>{c("search",s),C.get(route("supply_officer.reissued_items"),{search:s},{preserveState:!0,replace:!0})};return e.jsxs(T,{header:"Reissued Items",children:[e.jsx(I,{title:"Reissued Items"}),e.jsxs("div",{className:"p-6 rounded-xl shadow-md bg-green-50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Reissued Items"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("input",{type:"text",placeholder:"Search End User or Focal Person",className:"w-64 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:f.search,onChange:s=>{c("search",s.target.value),R(s.target.value)}})})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white",children:e.jsxs("table",{className:"w-full table-auto text-sm divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["RRSP No.","ICS No.","Returned By / End-User","Item Description","Reissued Qty","Reissued To","Actions"].map(s=>e.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-600 uppercase tracking-wide text-center",children:s},s))})}),e.jsx("tbody",{className:"divide-y divide-gray-100 text-center",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-12 text-gray-500 text-lg font-medium text-center",children:"No Reissued Items Found."})}):r.data.map((s,m)=>{var u,h,y,g;const p=s.items||[],x=[];for(let i=0;i<p.length;i+=2){const n=p.slice(i,i+2);x.push(e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 text-gray-700",children:s.rrsp_number}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:s.ics_number}),e.jsxs("td",{className:"px-6 py-4 text-gray-700",children:[(h=(u=n[0])==null?void 0:u.returned_by)==null?void 0:h.firstname," ",(g=(y=n[0])==null?void 0:y.returned_by)==null?void 0:g.lastname]}),e.jsx("td",{className:"px-6 py-4 text-gray-700 text-left",children:e.jsx("div",{className:"space-y-1",children:n.map((a,l)=>{var j;return e.jsx("div",{className:"border-b last:border-0 py-1",children:(j=a==null?void 0:a.inventory_item)==null?void 0:j.item_desc},l)})})}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.jsx("div",{className:"space-y-1",children:n.map((a,l)=>e.jsx("div",{className:"border-b last:border-0 py-1",children:a==null?void 0:a.quantity},l))})}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.jsx("div",{className:"space-y-1",children:n.map((a,l)=>e.jsx("div",{className:"border-b last:border-0 py-1",children:a==null?void 0:a.recipient},l))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("a",{href:route("supply_officer.print_reissued_items",s.id),className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition flex items-center justify-center gap-1",target:"_blank",children:[e.jsx($,{size:16})," Print"]})})]},`${s.id}-${i}`))}return x})})]})}),((o=r==null?void 0:r.links)==null?void 0:o.length)>3&&e.jsx("nav",{className:"mt-4 flex justify-center items-center space-x-2",children:r.links.map((s,m)=>e.jsx(D,{href:s.url||"#",className:`px-3 py-1 text-sm rounded-md ${s.active?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},m))})]}),e.jsx(P,{open:N,onOpenChange:d,children:e.jsxs(E,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(H,{children:"Confirm Issuance"}),e.jsx(L,{children:"Are you sure you want to switch this to RIS issuance?"})]}),e.jsxs(O,{className:"mt-4",children:[e.jsx(b,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(b,{onClick:w,children:"Yes, Record RIS"})]})]})})]})}export{ie as default};
