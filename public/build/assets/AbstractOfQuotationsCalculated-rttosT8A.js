import{a as c,j as e,H as De,c as C}from"./app-Cs1McY02.js";import{A as Te}from"./ApproverLayout-BgpuCr1u.js";import{D as S,a as R,b as P,c as F,d as W,e as $}from"./dialog-AyJe73wc.js";import{B as o}from"./button-rqNSa_DM.js";import{T as te}from"./textarea-WPm1Nj1c.js";import{u as Ae}from"./use-toast-RAxD_qPw.js";import{A as Ue}from"./AOQTabs-BsQLP5IX.js";import{c as Le}from"./createLucideIcon-CAyUIJle.js";import"./Dropdown-ckgaHpXR.js";import"./transition-1OrjVXTB.js";import"./toaster-CNCOgU5M.js";import"./index-mEOC90f-.js";import"./index-DmEAzzlf.js";import"./utils-BVseyFTm.js";import"./index-OUqkuChP.js";import"./index-TPlP--yk.js";import"./XMarkIcon-DDKr4MYC.js";import"./file-text--pdc2I_9.js";import"./index-CnXzlo42.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],ze=Le("undo-2",Qe);function os({rfq:d,groupedDetails:f={},committee:g}){var je;const p=d.purchase_request,[fe,I]=c.useState(!1),[O,E]=c.useState(""),[D,y]=c.useState({open:!1,type:"success",title:"",description:""}),[N,ye]=c.useState({rfqId:null,supplierId:null,detailId:null}),[_e,T]=c.useState(!1),{toast:_}=Ae(),[x,ve]=c.useState(null),[A,re]=c.useState(""),[m,B]=c.useState(d.award_mode??"whole-pr"),[H,Ne]=c.useState(()=>{const s={};return["secretariat","member1","member2","member3","vice_chair","chair"].forEach(l=>{var i,n;const t=(n=(i=g==null?void 0:g.members)==null?void 0:i.filter(a=>a.position===l))==null?void 0:n.find(a=>a.status==="active");s[l]={name:(t==null?void 0:t.name)||"",status:(t==null?void 0:t.status)||"inactive"}}),{status:(g==null?void 0:g.status)||"draft",members:s}}),[ke,U]=c.useState(!1),[ie,we]=c.useState(null),[ae,V]=c.useState(!1),[ne,K]=c.useState(!1),[le,ce]=c.useState(!1),[L,oe]=c.useState({}),de=async(s,r)=>{var i,n;const l=`${s}-${r}`,t=parseFloat(w[l]??0);oe(a=>({...a,[l]:!0}));try{const{data:a}=await axios.post(route("bac_user.save_unit_price",{id:d.id}),{supplier_id:s,detail_id:r,unit_price:t});console.log(r),_({title:a.success?"Price Saved":"Save Failed",description:a.message||`Unit price saved: â‚±${t.toLocaleString()}`,variant:a.success?"default":"destructive",duration:3e3}),a.success&&a.total_price_calculated&&(Oe(s,a.total_price_calculated),C.reload({preserveScroll:!0}))}catch(a){_({title:"Save Failed",description:((n=(i=a.response)==null?void 0:i.data)==null?void 0:n.message)||a.message||"Unable to save unit price",variant:"destructive",duration:3e3})}finally{oe(a=>({...a,[l]:!1}))}},pe=(s,r,l=null)=>{we({rfqId:s,supplierId:r,detailId:l}),E(""),U(!0)},Ce=()=>{K(!0);const s={remarks_as_calculated:O,mode:m,...m==="per-item"?{detail_id:ie.detailId}:{}};C.post(route("bac_user.rollback_winner_as_calculated",{id:ie.rfqId}),s,{preserveScroll:!0,onSuccess:()=>{U(!1),K(!1),y({open:!0,type:"success",title:"Rollback Successful",description:"Winner selection has been rolled back."}),_({title:"Rollback Successful",description:"Winner selection has been rolled back.",duration:3e3})},onError:()=>{K(!1),y({open:!0,type:"error",title:"Rollback Failed",description:"Unable to rollback winner. Please try again."})}})},Se=s=>window.open(route("bac_user.print_aoq_calculated",{id:s}),"_blank"),Re=s=>window.open(route("bac_user.print_aoq_per_item_grouped",{id:s}),"_blank"),me=(s,r,l=null)=>{ye({rfqId:s,supplierId:r,detailId:l}),E(""),I(!0)},Pe=async()=>{var r,l,t;ce(!0);const s={supplier_id:N.supplierId,remarks_as_calculated:O,...m==="per-item"?{detail_id:N.detailId}:{},total_price:ee(N.supplierId,(r=G[N.supplierId])==null?void 0:r.total)};try{const i=await axios.post(route("bac_user.mark_winner_as_calculated",{id:N.rfqId}),s);if(i.data.success)I(!1),y({open:!0,type:"success",title:"Winner Marked",description:m==="per-item"?"Supplier has been awarded for the selected item.":"Supplier has been awarded for the entire PR."}),_({title:"Winner Marked",description:m==="per-item"?"Supplier has been awarded for the selected item.":"Supplier has been awarded for the entire PR.",duration:3e3}),C.reload({preserveScroll:!0});else throw new Error(i.data.message||"Unknown error")}catch(i){console.error(i),y({open:!0,type:"error",title:"Failed to Mark Winner",description:((t=(l=i.response)==null?void 0:l.data)==null?void 0:t.message)||"Something went wrong while marking the winner. Please try again."})}finally{ce(!1)}},{supplierMap:G,winnerCounts:ue}=c.useMemo(()=>{const s={},r={};return p.details.forEach(l=>{(f[l.id]||[]).forEach(i=>{var u,h,z;const n=i.supplier.id;if(!s[n]){const v=(h=(u=d.supplier_totals)==null?void 0:u.find(M=>M.supplier_id===n))==null?void 0:h.final_total_price;s[n]={supplier:i.supplier,detailIds:new Set,total:0,final_total_price:v??null},r[n]=0}s[n].detailIds.add(l.id);const a=((z=p.details.find(v=>v.id===l.id))==null?void 0:z.quantity)??1,j=parseFloat(i.quoted_price??0)||0;s[n].total+=j*a,i.is_winner_as_calculated&&r[n]++})}),{supplierMap:s,winnerCounts:r}},[p.details,f,d.supplier_totals]),J=p.details.length,b=Object.values(G).filter(s=>s.detailIds.size===J),X=b.length>0;c.useEffect(()=>{!X&&m==="whole-pr"&&B("per-item")},[X,m]),p.details.some(s=>(f[s.id]||[]).some(r=>r.is_winner_as_calculated));const Q=Object.values(ue).some(s=>s===J),Fe=p.details.some(s=>(f[s.id]||[]).some(r=>r.is_winner_as_calculated)),[We,k]=c.useState(!1),[Y,xe]=c.useState(null),[he,Z]=c.useState(""),[ge,q]=c.useState(!1),$e=()=>{q(!0);const s={supplier_id:Y.supplierId,remarks_as_calculated:he,mode:m,...m==="per-item"?{detail_id:Y.detailId}:{}};C.post(route("bac_user.save_remarks_as_calculated",{id:Y.rfqId}),s,{preserveScroll:!0,onSuccess:()=>{q(!1),k(!1),_({title:"Remarks Saved",description:"Supplier remarks updated successfully.",duration:3e3})},onError:()=>{q(!1),_({title:"Save Failed",description:"Could not save remarks. Please try again.",variant:"destructive",duration:3e3})}})};console.log(d);const[Me,Ie]=c.useState({}),Oe=(s,r)=>{Ie(l=>({...l,[s]:r}))},ee=(s,r)=>{var i;const l=((i=G[s])==null?void 0:i.detailIds)||[];let t=0;return l.forEach(n=>{var v,M;const a=`${s}-${n}`,j=w[a],u=(v=f[n])==null?void 0:v.find(se=>se.supplier.id===s),h=(u==null?void 0:u.unit_price_edited)??(u==null?void 0:u.quoted_price)??0,z=((M=p.details.find(se=>se.id===n))==null?void 0:M.quantity)??1;t+=parseFloat(j??h)*z}),t},[w,Ee]=c.useState({}),be=(s,r,l)=>{Ee(t=>({...t,[`${s}-${r}`]:l}))};return e.jsxs(Te,{children:[e.jsx(De,{title:`Abstract for ${p.pr_number}`}),e.jsxs("div",{className:"px-8 py-10",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:["Abstract of Quotations â€“ PR #",p.pr_number]}),e.jsx(Ue,{pr:p.id}),e.jsx("div",{className:"mb-4 flex justify-between items-center",children:e.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 bg-blue-700 hover:bg-blue-800 text-white rounded-md text-sm shadow-sm",children:"â† Back"})}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsx(o,{variant:m==="whole-pr"?"default":"outline",onClick:()=>B("whole-pr"),disabled:!!d.award_mode,children:"Winner for Entire PR"}),e.jsx(o,{variant:m==="per-item"?"default":"outline",onClick:()=>B("per-item"),disabled:!!d.award_mode,children:"Winner per Item"})]}),!X&&m==="whole-pr"&&e.jsx("p",{className:"text-sm text-red-600 mb-4",children:"âš ï¸ No supplier quoted for all items. Consider declaring winners per item."}),m==="whole-pr"&&e.jsxs("div",{className:"mb-10 border p-4 rounded-lg bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Comparison for Entire Purchase Request"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Focal Person:"})," ",p.focal_person.firstname," ",p.focal_person.lastname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Division:"})," ",p.division.division]})]}),b.length===1&&e.jsx("p",{className:"mt-2 text-sm text-orange-600 font-medium",children:"âš ï¸ Note: Only one supplier submitted quotes for the entire PR."})]}),Q&&e.jsx("button",{onClick:()=>Se(d.id),className:"text-sm text-white bg-green-600 hover:bg-green-700 px-3 py-2 rounded-md h-fit",children:"ðŸ–¨ï¸ Print Abstract as Calculated"})]}),e.jsxs("table",{className:"w-full text-sm border border-gray-300 rounded-lg overflow-hidden shadow",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-3 text-left font-semibold",children:"Item"}),b.map(s=>e.jsx("th",{className:"border px-4 py-3 text-center font-semibold text-xs w-56",children:s.supplier.company_name},s.supplier.id))]})}),e.jsxs("tbody",{children:[p.details.map((s,r)=>{const l=f[s.id]||[],t=l.filter(n=>b.some(a=>a.supplier.id===n.supplier.id)).map(n=>parseFloat(n.unit_price_edited??n.quoted_price)),i=t.length>0?Math.min(...t):null;return e.jsxs("tr",{className:r%2===0?"bg-white":"bg-gray-50",children:[e.jsxs("td",{className:"border px-4 py-2 font-medium",children:[s.item," ",s.specs]}),b.map(n=>{const a=l.find(h=>h.supplier.id===n.supplier.id),j=a?parseFloat(a.unit_price_edited??a.quoted_price):null,u=j!==null&&i!==null&&j===i;return e.jsx("td",{className:`border px-4 py-2 text-center align-top ${u?"bg-blue-300":""}`,children:a?e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsx("input",{type:"number",step:"0.01",className:"w-28 px-2 py-1 border rounded text-right font-semibold",value:w[`${a.supplier.id}-${s.id}`]??j,onChange:h=>be(a.supplier.id,s.id,parseFloat(h.target.value)||0),disabled:Q}),e.jsxs("span",{className:"font-semibold",children:[e.jsx("span",{className:"mx-1",children:"x"}),e.jsx("span",{className:"mr-1",children:s.quantity}),e.jsx("span",{children:s.unit})]}),a.unit_price_edited&&a.unit_price_edited!==a.quoted_price?e.jsxs("span",{className:"text-xs text-gray-500 italic",children:["Original/Quoted:"," ",e.jsxs("span",{className:"font-semibold underline",children:["â‚±",parseFloat(a.quoted_price).toLocaleString()]})]}):null,e.jsx(o,{size:"xs",variant:"outline",className:"px-2 py-1 bg-green-600 text-white",onClick:()=>de(a.supplier.id,s.id),disabled:L[`${a.supplier.id}-${s.id}`]||Q,children:L[`${a.supplier.id}-${s.id}`]?"Saving...":"Save"})]}):e.jsx("span",{className:"text-gray-400",children:"â€”"})},n.supplier.id)})]},s.id)}),e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{className:"border px-4 py-3 text-right",children:"Total Calculated Price "}),b.map(s=>{const r=ee(s.supplier.id,s.total),l=b.map(n=>ee(n.supplier.id,n.total)),t=Math.min(...l),i=r===t;return e.jsx("td",{className:`border px-4 py-3 text-right ${i?"bg-green-200":""}`,children:e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:"text-xs text-gray-500 italic",children:["Quoted Total: â‚±",parseFloat(s.total||0).toLocaleString()]}),e.jsxs("span",{className:`text-xs font-semibold ${i?"text-green-700":"text-blue-600"}`,children:["Calculated Total: â‚±",r.toLocaleString()]})]})},s.supplier.id)})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border px-4 py-3 text-right font-semibold",children:"Supplier Remarks"}),b.map(s=>{const r=Object.values(f).flat().filter(i=>i.supplier.id===s.supplier.id).map(i=>{var n;return((n=i.remarks_as_calculated)==null?void 0:n.trim())||""}),t=r.length>0&&r.every(i=>i===r[0])&&r.length>0?r[0]||"No remarks":"Varying remarks (edit to unify)";return e.jsx("td",{className:"border px-4 py-3 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-xs text-gray-600 italic",children:t}),e.jsx(o,{size:"xs",variant:"outline",className:"px-2 py-1 bg-blue-500 text-white",onClick:()=>{xe({rfqId:d.id,supplierId:s.supplier.id,detailId:null,currentRemarks:t==="No remarks"||t.includes("Varying")?"":t}),Z(t==="No remarks"||t.includes("Varying")?"":t),k(!0)},children:"Edit Remarks"})]})},`remarks-${s.supplier.id}`)})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("td",{className:"border px-4 py-3 text-right font-semibold",children:"Winner"}),b.map(s=>e.jsx("td",{className:"border px-4 py-3 text-center",children:ue[s.supplier.id]===J?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"âœ” Winner"}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>pe(d.id,s.supplier.id),disabled:!!d.purchase_order,children:[e.jsx(ze,{className:"h-4 w-4"}),"Undo Winner"]})]}):Q?"â€”":e.jsx(o,{size:"sm",onClick:()=>me(d.id,s.supplier.id),children:"Mark as Winner"})},s.supplier.id))]})]})]})]}),m==="per-item"&&e.jsxs("div",{className:"space-y-8 mb-10 border p-4 rounded-lg bg-white shadow-sm",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx(o,{size:"sm",className:"bg-green-600 text-white",onClick:()=>Re(d.id),disabled:!Fe,children:"ðŸ–¨ï¸ Print AOQ As Calculated"})}),p.details.map(s=>{const r=f[s.id]||[],l=r.some(t=>t.is_winner_as_calculated);return e.jsxs("div",{className:"border p-4 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("h4",{className:"font-semibold",children:s.item})}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Description:"})," ",s.specs||"â€”"," ",e.jsx("br",{}),e.jsx("strong",{children:"Quantity:"})," ",s.quantity," ",s.unit," ",e.jsx("br",{})]}),e.jsxs("table",{className:"w-full text-sm border rounded-lg overflow-hidden shadow",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left w-auto",children:"Item"}),r.map(t=>e.jsx("th",{className:"px-4 py-2 text-center w-56",children:t.supplier.company_name},t.supplier.id))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-3 font-medium",children:s.item}),r.map(t=>{const i=parseFloat(t.unit_price_edited??t.quoted_price);return e.jsx("td",{className:"border px-4 py-2 text-center align-top w-56",children:e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsx("input",{type:"number",step:"0.01",className:"w-28 px-2 py-1 border rounded text-right font-semibold",value:w[`${t.supplier.id}-${s.id}`]??i,onChange:n=>be(t.supplier.id,s.id,parseFloat(n.target.value)||0)}),t.unit_price_edited&&t.unit_price_edited!==t.quoted_price&&e.jsxs("span",{className:"text-xs text-gray-500 italic",children:["Original: â‚±",parseFloat(t.quoted_price).toLocaleString()]}),e.jsx(o,{size:"xs",variant:"outline",className:"px-2 py-1 bg-green-500 text-white",onClick:()=>de(t.supplier.id,s.id),disabled:L[`${t.supplier.id}-${s.id}`],children:L[`${t.supplier.id}-${s.id}`]?"Saving...":"Save"})]})},t.supplier.id)})]}),e.jsxs("tr",{className:"bg-gray-200 font-semibold",children:[e.jsx("td",{className:"border px-4 py-3 text-right",children:"Effective Price"}),r.map(t=>{const i=`${t.supplier.id}-${s.id}`,n=parseFloat(w[i]??t.unit_price_edited??t.quoted_price??0),a=s.quantity??1,j=n*a,u=Number(a)||0,h=Number(j)||0;return e.jsx("td",{className:"border px-4 py-3 text-right text-green-700",children:e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:"text-xs text-gray-500 italic",children:["(Quoted Price: â‚±",parseFloat(t.quoted_price||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),")"]}),e.jsxs("span",{className:"text-xs text-gray-500 italic",children:["Qty: ",u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("span",{className:"text-xs text-blue-600 font-semibold",children:["Calculated (Unit Ã— Qty): â‚±",h.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})},t.supplier.id)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-medium",children:"Remarks"}),r.map(t=>{var n;const i=((n=t.remarks_as_calculated)==null?void 0:n.trim())||"No remarks";return e.jsx("td",{className:"px-4 py-2 text-center align-top",children:e.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[e.jsx("span",{className:"text-xs text-gray-600 italic",children:i}),e.jsx(o,{size:"xs",variant:"outline",className:"px-2 py-1",onClick:()=>{xe({rfqId:d.id,supplierId:t.supplier.id,detailId:s.id,currentRemarks:i==="No remarks"?"":i}),Z(i==="No remarks"?"":i),k(!0)},children:"Edit"})]})},`item-remarks-${t.supplier.id}`)})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("td",{className:"border px-4 py-3 text-right font-semibold",children:"Winner"}),r.map(t=>e.jsx("td",{className:"border px-4 py-3 text-center",children:t.is_winner_as_calculated?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"âœ” Winner"}),e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>pe(d.id,t.supplier.id,s.id),children:"Rollback"})]}):l?"â€”":e.jsx(o,{size:"sm",onClick:()=>me(d.id,t.supplier.id,s.id),children:"Mark as Winner"})},t.supplier.id))]})]})]})]},s.id)})]}),e.jsxs("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"BAC Committee"}),e.jsx("ul",{className:"space-y-3",children:["chair","vice_chair","secretariat","member1","member2","member3"].map(s=>{const r=H.members[s];return(r==null?void 0:r.status)==="active"&&e.jsxs("li",{className:"flex items-center justify-between bg-white p-3 rounded-lg shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:r.name||"â€”"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.replace("_"," ").toUpperCase()})]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{ve({position:s,current:r}),re(""),T(!0)},children:"Replace"})]},s)})})]})]}),e.jsx(S,{open:fe,onOpenChange:I,children:e.jsxs(R,{children:[e.jsxs(P,{children:[e.jsx(F,{children:"Confirm Winner"}),e.jsx(W,{children:"Provide remarks for awarding this supplier."})]}),e.jsx(te,{value:O,onChange:s=>E(s.target.value)}),e.jsxs($,{children:[e.jsx(o,{variant:"secondary",onClick:()=>I(!1),children:"Cancel"}),e.jsx(o,{disabled:le,onClick:Pe,children:le?"Confirming Winner...":"Confirm"})]})]})}),e.jsx(S,{open:_e,onOpenChange:T,children:e.jsxs(R,{className:"sm:max-w-md",children:[e.jsxs(P,{children:[e.jsx(F,{children:"Replace Committee Member"}),e.jsxs(W,{children:["Enter a new member to replace"," ",e.jsx("strong",{children:((je=x==null?void 0:x.current)==null?void 0:je.name)||"N/A"})," (",x==null?void 0:x.position.replace("_"," ").toUpperCase(),")."]})]}),e.jsx("input",{type:"text",value:A,onChange:s=>re(s.target.value),placeholder:"Enter new member name",className:"w-full border px-3 py-2 rounded mb-2"}),e.jsxs($,{className:"mt-4",children:[e.jsx(o,{variant:"secondary",onClick:()=>T(!1),children:"Cancel"}),e.jsx(o,{disabled:ae,onClick:()=>{if(!A.trim())return;V(!0),Ne(r=>({...r,members:{...r.members,[x.position]:{name:A.trim(),status:"active"}}}));const s={id:(g==null?void 0:g.id)??null,status:H.status,members:Object.entries({...H.members,[x.position]:{name:A.trim(),status:"active"}}).map(([r,l])=>({position:r,name:l.name,status:l.status}))};C.post(route("bac.committee.save"),s,{preserveScroll:!0,onSuccess:()=>{V(!1),T(!1),y({open:!0,type:"success",title:"Committee Updated",description:`${x.position.replace("_"," ")} replaced successfully.`}),_({title:"Committee Updated",description:`${x.position.replace("_"," ")} replaced successfully.`,duration:3e3})},onError:()=>{V(!1),y({open:!0,type:"error",title:"Committee Update Failed",description:"Unable to replace committee member. Please try again."})}})},children:ae?"Saving...":"Confirm"})]})]})}),e.jsx(S,{open:ke,onOpenChange:U,children:e.jsxs(R,{children:[e.jsxs(P,{children:[e.jsx(F,{children:"Rollback Winner"}),e.jsx(W,{children:"Provide remarks for rolling back this winner selection."})]}),e.jsx(te,{value:O,onChange:s=>E(s.target.value)}),e.jsxs($,{children:[e.jsx(o,{variant:"secondary",onClick:()=>U(!1),children:"Cancel"}),e.jsx(o,{disabled:ne,variant:"destructive",onClick:Ce,children:ne?"Rolling Back Winner...":"Confirm Rollback"})]})]})}),e.jsx(S,{open:D.open,onOpenChange:s=>y(r=>({...r,open:s})),children:e.jsxs(R,{children:[e.jsxs(P,{children:[e.jsx(F,{className:D.type==="error"?"text-red-600":"text-green-600",children:D.title}),e.jsx(W,{children:D.description})]}),e.jsx($,{children:e.jsx(o,{onClick:()=>y(s=>({...s,open:!1})),children:"Close"})})]})}),e.jsx(S,{open:We,onOpenChange:k,children:e.jsxs(R,{children:[e.jsxs(P,{children:[e.jsx(F,{children:"Edit Supplier Remarks"}),e.jsxs(W,{children:["Enter remarks for this supplier ",m==="per-item"?"on this item":"for the PR","."]})]}),e.jsx(te,{value:he,onChange:s=>Z(s.target.value)}),e.jsxs($,{children:[e.jsx(o,{variant:"secondary",onClick:()=>k(!1),children:"Cancel"}),e.jsx(o,{disabled:ge,onClick:$e,children:ge?"Saving...":"Save"})]})]})})]})}export{os as default};
