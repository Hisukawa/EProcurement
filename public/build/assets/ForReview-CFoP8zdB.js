import{a as s,c as g,j as e,H as y}from"./app-Cs1McY02.js";import"./Dropdown-ckgaHpXR.js";import"./index-TPlP--yk.js";import"./toaster-CNCOgU5M.js";import{T as v}from"./Tooltip-Bu8NPFLP.js";import{T as w}from"./TwgUserLayout-CjN7nVC2.js";import{E as b}from"./eye-Cl84lL7T.js";import{F as f}from"./XMarkIcon-DDKr4MYC.js";import"./transition-1OrjVXTB.js";import"./use-toast-RAxD_qPw.js";import"./index-mEOC90f-.js";import"./index-DmEAzzlf.js";import"./createLucideIcon-CAyUIJle.js";import"./utils-BVseyFTm.js";import"./index-OUqkuChP.js";import"./clipboard-check-BH2-nbLx.js";function H({sentPurchaseRequests:d,filters:a={},flash:c}){const[n,x]=s.useState(null),[m,r]=s.useState(!1),[o,p]=s.useState(a.prNumber||""),[l,u]=s.useState(a.focalPerson||""),[i,h]=s.useState(a.division||"");return s.useEffect(()=>{const t=setTimeout(()=>{g.get(route("twg_user.for_review"),{prNumber:o,focalPerson:l,division:i},{preserveState:!0,preserveScroll:!0,replace:!0})},400);return()=>clearTimeout(t)},[o,l,i]),e.jsxs(w,{header:"Schools Division Office - Ilagan | For Review",flash:c,children:[e.jsx(y,{title:"PRs For Review"}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Purchase Requests For Review"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsx("input",{type:"text",value:o,onChange:t=>p(t.target.value),placeholder:"Search PR Number...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsx("input",{type:"text",value:l,onChange:t=>u(t.target.value),placeholder:"Search Focal Person...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsxs("select",{value:i,onChange:t=>h(t.target.value),className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-44",children:[e.jsx("option",{value:"",children:"All Divisions"}),e.jsx("option",{value:"1",children:"SGOD"}),e.jsx("option",{value:"2",children:"OSDS"}),e.jsx("option",{value:"3",children:"CID"})]})]}),d.data.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No purchase requests ready for review."}):e.jsx("div",{className:"overflow-x-auto rounded-md border border-gray-200 shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsx("tr",{children:["PR Number","Focal Person","Division","Purpose","Status","Date Sent","Action"].map(t=>e.jsx("th",{className:"px-6 py-3 text-center font-semibold uppercase tracking-wider text-xs",children:t},t))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:d.data.map(t=>e.jsxs("tr",{className:"text-center hover:bg-indigo-50 transition",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-indigo-600",children:e.jsx(v,{to:route("twg_user.show_details",t.id),tooltip:"View PR details",className:"hover:underline focus:underline",children:t.pr_number})}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:[t.focal_person.firstname,t.focal_person.middlename,t.focal_person.lastname].filter(Boolean).join(" ")}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:t.division.division}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:t.purpose}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.status.toLowerCase()==="reviewed"?"bg-green-100 text-green-800":t.status.toLowerCase()==="pending"?"bg-yellow-100 text-yellow-800":t.status.toLowerCase()==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono text-sm whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 flex space-x-2 justify-center",children:e.jsx("button",{onClick:()=>{x(`/storage/${t.approval_image}`),r(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm shadow",children:e.jsx(b,{})})})]},t.id))})]})}),m&&n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4",onClick:()=>r(!1),children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-auto",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 text-gray-600 hover:text-gray-900",children:e.jsx(f,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 p-4 border-b",children:"Approved Form"}),e.jsx("img",{src:n,alt:"Approved Form",className:"w-full h-auto object-contain rounded-b-lg p-4"})]})})]})]})}export{H as default};
