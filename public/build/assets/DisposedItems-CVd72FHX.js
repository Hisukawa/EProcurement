import{u as _,a as C,j as e,H as S,L as k,c as I}from"./app-CtTXRvSW.js";import{u as R}from"./use-toast-n7ss-q37.js";import{D as P,a as E,b as F,c as H,d as L,e as O}from"./dialog-Bx8Sq_PR.js";import{B as f}from"./button-BXv_ZNaU.js";import{S as $}from"./SupplyOfficerLayout-BkfKkaPs.js";import{P as B}from"./printer-check-PJwrS8sc.js";import"./index-B2vGw--Q.js";import"./index-Dow8KyZk.js";import"./createLucideIcon-BS5JQiMA.js";import"./utils-_QWm-tM-.js";import"./index-Bhk03iWx.js";import"./toaster-BHX75O9a.js";import"./index-ClPfL8xw.js";import"./Dropdown-BOTfWPms.js";import"./transition-CwMeo9Sp.js";import"./XMarkIcon-B3-C-RCN.js";import"./clipboard-check-CQy8bL28.js";import"./package-check-BilTQm-G.js";import"./trash-CMtWkb3K.js";function ie({filters:t,records:r,user:T}){var c;const{data:b,setData:d}=_({search:(t==null?void 0:t.search)||"",page:(t==null?void 0:t.page)||1}),[N,l]=C.useState(!1),{toast:v}=R(),D=()=>{v({title:"Record Updated",description:"Disposal successfully confirmed!",duration:3e3,className:"bg-green-600 text-white"}),l(!1)},w=s=>{d("search",s),I.get(route("supply_officer.disposed_items"),{search:s},{preserveState:!0,replace:!0})};return e.jsxs($,{header:"Disposed Items",children:[e.jsx(S,{title:"Disposed Items"}),e.jsxs("div",{className:"justify-center items-center bg-red-50 p-6 rounded-xl shadow-md",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Disposed Items"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("input",{type:"text",placeholder:"Search End User or Focal Person",className:"w-64 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:b.search,onChange:s=>{d("search",s.target.value),w(s.target.value)}})})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white",children:e.jsxs("table",{className:"w-full table-auto text-sm divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["RRSP No.","ICS No.","Returned By / End-User","Item Description","Disposed Quantity","Remarks","Actions"].map(s=>e.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-600 uppercase tracking-wide text-center",children:s},s))})}),e.jsx("tbody",{className:"divide-y divide-gray-100 text-center",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-12 text-gray-500 text-lg font-medium text-center",children:"No Disposed Items Found."})}):r.data.map((s,m)=>{var h,u,y,g;const p=s.items||[],x=[];for(let i=0;i<p.length;i+=2){const n=p.slice(i,i+2);x.push(e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 text-gray-700",children:s.rrsp_number}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:s.ics_number}),e.jsxs("td",{className:"px-6 py-4 text-gray-700",children:[(u=(h=n[0])==null?void 0:h.returned_by)==null?void 0:u.firstname," ",(g=(y=n[0])==null?void 0:y.returned_by)==null?void 0:g.lastname]}),e.jsx("td",{className:"px-6 py-4 text-gray-700 text-left",children:e.jsx("div",{className:"space-y-1",children:n.map((a,o)=>{var j;return e.jsx("div",{className:"border-b last:border-0 py-1",children:(j=a==null?void 0:a.inventory_item)==null?void 0:j.item_desc},o)})})}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.jsx("div",{className:"space-y-1",children:n.map((a,o)=>e.jsx("div",{className:"border-b last:border-0 py-1",children:a==null?void 0:a.quantity},o))})}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.jsx("div",{className:"space-y-1",children:n.map((a,o)=>e.jsx("div",{className:"border-b last:border-0 py-1 italic text-gray-500",children:(a==null?void 0:a.remarks)||"â€”"},o))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("a",{href:route("supply_officer.print_disposed_items",s.id),className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition flex items-center justify-center gap-1",target:"_blank",children:[e.jsx(B,{size:16})," Print"]})})]},`${s.id}-${i}`))}return x})})]})}),((c=r==null?void 0:r.links)==null?void 0:c.length)>3&&e.jsx("nav",{className:"mt-4 flex justify-center items-center space-x-2",children:r.links.map((s,m)=>e.jsx(k,{href:s.url||"#",className:`px-3 py-1 text-sm rounded-md ${s.active?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},m))})]}),e.jsx(P,{open:N,onOpenChange:l,children:e.jsxs(E,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(H,{children:"Confirm Disposal"}),e.jsx(L,{children:"Are you sure you want to mark this item as disposed?"})]}),e.jsxs(O,{className:"mt-4",children:[e.jsx(f,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),e.jsx(f,{onClick:D,children:"Yes, Confirm"})]})]})})]})}export{ie as default};
