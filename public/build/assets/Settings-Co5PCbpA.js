import{b as G,a as o,j as e,H as J,c as x}from"./app-DD2uK0zY.js";import{A as K}from"./AdminLayout-xYPKKpsW.js";import{D as v,a as N,b,c as y,d as C,e as S}from"./dialog-zrxpP4Hw.js";import{B as a}from"./button-Bq4k0Ljh.js";import{C as k,a as E,b as O,c as M}from"./card-Bw47le4e.js";import{I as h}from"./input-DV5l2bKZ.js";import{u as Q}from"./use-toast-ib3QBt3c.js";import{B as W}from"./building-2-BOeThWLt.js";import{C as X}from"./circle-plus-BJQ6wEx1.js";import{c as Y}from"./createLucideIcon-Bms0I2ee.js";import{C as Z}from"./clipboard-list-BkNL2KZq.js";import"./Dropdown-D-UuPbrA.js";import"./transition-o0BzbkQC.js";import"./toaster-C-9VAH0i.js";import"./index-C6PyR5fr.js";import"./index-DVmik40P.js";import"./utils-BvCQ01dZ.js";import"./index-CYMZwvoE.js";import"./users-BrC4q2cO.js";import"./index-Br8PWsuU.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],ee=Y("users-round",$);function be({divisions:A,inspectionCommittees:F,bacCommittees:I}){var w;const{props:U}=G(),u=(w=U.flash)==null?void 0:w.success,{toast:c}=Q(),[q,g]=o.useState(!1),[B,l]=o.useState(!1),[P,p]=o.useState(!1),[n,j]=o.useState(null),[r,f]=o.useState(""),[i,t]=o.useState({name:"",meaning:""});o.useEffect(()=>{u&&g(!0)},[u]);const R=()=>{n&&x.post(route("admin.update_inspection",n.inspection_committee_id),{member_id:n.id,replacementName:i.name},{preserveScroll:!0,onSuccess:()=>{c({title:"✅ Member Replaced",description:"Inspection Committee updated successfully!",duration:3e3}),l(!1)},onError:()=>{c({title:"❌ Replace Failed",description:"Check the input and try again.",variant:"destructive"})}})},D=(s,d)=>{j(s),f(d),t({member_id:s.id,name:s.name,position:s.position,meaning:s.meaning||""}),l(!0)},T=()=>{n&&(r==="bac"?x.post(route("admin.update_bac",{id:n.committee_id??1}),{members:[{member_id:i.member_id,name:i.name,position:i.position}]},{preserveScroll:!0}):r==="inspection"?R():r==="requesting"?x.post(route("admin.update_requesting",{division:n.id}),{name:i.name},{preserveScroll:!0,onSuccess:()=>{c({title:"✅ Officer Updated",description:"Division officer updated successfully."}),t({name:"",meaning:""}),l(!1)},onError:()=>c({title:"❌ Update Failed",description:"Please check the name and try again.",variant:"destructive"})}):r==="division"&&x.post(route("admin.update_division",n.id),{name:i.name,meaning:i.meaning},{preserveScroll:!0,onSuccess:()=>{c({title:"✅ Division Updated",description:"Division details successfully updated."})}}),l(!1))},H=()=>{i.name.trim()&&x.post(route("admin.add_division"),{division:i.name,meaning:i.meaning},{preserveScroll:!0,onSuccess:()=>{c({title:"✅ Division Added",description:"New division successfully added!",duration:3e3}),t({name:"",meaning:""}),p(!1)},onError:()=>c({title:"❌ Failed to Add",description:"Check your input and try again.",variant:"destructive"})})},_=A??[],L=F??[],z=I??[],V=s=>({chair:"Chair",vice_chair:"Vice Chair",secretariat:"Secretariat",member1:"Member",member2:"Member",member3:"Member"})[s]||s;return e.jsxs(K,{header:"⚙️ System Settings",children:[e.jsx(J,{title:"Settings"}),e.jsxs("div",{className:"max-w-6xl mx-auto mt-6 space-y-12",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"System Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage divisions, officers, and committee signatories."})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-blue-700 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5"}),"Divisions"]}),e.jsxs(a,{onClick:()=>p(!0),children:[e.jsx(X,{className:"w-4 h-4 mr-2"})," Add Division"]})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg shadow-sm",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-blue-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-semibold text-gray-700",children:"#"}),e.jsx("th",{className:"p-3 font-semibold text-gray-700",children:"Division"}),e.jsx("th",{className:"p-3 font-semibold text-gray-700",children:"Meaning"}),e.jsx("th",{className:"p-3 font-semibold text-gray-700",children:"Officer"}),e.jsx("th",{className:"p-3 font-semibold text-gray-700 text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white",children:_.length>0?_.map((s,d)=>e.jsxs("tr",{className:"border-b bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3",children:d+1}),e.jsx("td",{className:"p-3 font-medium text-gray-800",children:s.division}),e.jsx("td",{className:"p-3 text-gray-600",children:s.meaning||"—"}),e.jsx("td",{className:"p-3 text-gray-900",children:s.active_officer?s.active_officer.name:"No officer assigned"}),e.jsxs("td",{className:"p-3 flex justify-center gap-2",children:[e.jsx(a,{size:"sm",variant:"outline",onClick:()=>{var m;j(s),f("requesting"),t({name:((m=s.active_officer)==null?void 0:m.name)||""}),l(!0)},children:"Edit Officer"}),e.jsx(a,{size:"sm",variant:"secondary",onClick:()=>{j(s),f("division"),t({name:s.division,meaning:s.meaning||""}),l(!0)},children:"Edit Division"})]})]},s.id)):e.jsx("tr",{className:"bg-white",children:e.jsx("td",{colSpan:"5",className:"p-4 text-center text-gray-500",children:"No divisions found."})})})]})})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-green-700 flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"w-5 h-5"}),"Inspection Team"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(s=>e.jsxs(k,{className:"hover:shadow-lg transition",children:[e.jsx(E,{children:e.jsx(O,{className:"text-green-600",children:s.position})}),e.jsxs(M,{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx(a,{variant:"outline",className:"mt-4 w-full",onClick:()=>D(s,"inspection"),children:"Edit"})]})]},s.id))})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-purple-700 flex items-center gap-2 mb-4",children:[e.jsx(Z,{className:"w-5 h-5"}),"BAC Committee"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.sort((s,d)=>{const m=["chair","vice_chair","secretariat","member1","member2","member3"];return m.indexOf(s.position)-m.indexOf(d.position)}).map(s=>e.jsxs(k,{className:"hover:shadow-lg transition",children:[e.jsx(E,{children:e.jsx(O,{className:"text-purple-600",children:V(s.position)})}),e.jsxs(M,{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx(a,{variant:"outline",className:"mt-4 w-full",onClick:()=>D(s,"bac"),children:"Edit"})]})]},s.id))})]})]}),e.jsx(v,{open:q,onOpenChange:g,children:e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsx(y,{children:"✅ Success"}),e.jsx(C,{children:u})]}),e.jsx(S,{children:e.jsx(a,{onClick:()=>g(!1),children:"Close"})})]})}),e.jsx(v,{open:B,onOpenChange:l,children:e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsx(y,{children:r==="division"?"Edit Division":r==="requesting"?"Update Officer":"Edit Committee Member"}),e.jsx(C,{children:r==="division"?"Update the division name or its meaning.":"Update the member’s name below."})]}),e.jsx("div",{className:"space-y-4",children:r==="division"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Division Name"}),e.jsx(h,{value:i.name,onChange:s=>t({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Meaning"}),e.jsx(h,{value:i.meaning,onChange:s=>t({...i,meaning:s.target.value})})]})]}):e.jsxs(e.Fragment,{children:[r!=="requesting"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Position"}),e.jsx("p",{className:"font-medium text-gray-800",children:n==null?void 0:n.position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Name"}),e.jsx(h,{value:i.name,onChange:s=>t({...i,name:s.target.value})})]})]})}),e.jsxs(S,{children:[e.jsx(a,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(a,{onClick:T,children:"Save Changes"})]})]})}),e.jsx(v,{open:P,onOpenChange:p,children:e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsx(y,{children:"Add New Division"}),e.jsx(C,{children:"Enter the division name and its meaning."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Division Name"}),e.jsx(h,{value:i.name,onChange:s=>t({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Meaning"}),e.jsx(h,{value:i.meaning,onChange:s=>t({...i,meaning:s.target.value})})]})]}),e.jsxs(S,{children:[e.jsx(a,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(a,{onClick:H,children:"Add Division"})]})]})})]})}export{be as default};
