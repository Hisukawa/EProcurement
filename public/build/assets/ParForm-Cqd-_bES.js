import{v as S,r as A,j as e,$ as D}from"./app-CsTVGbv7.js";import{S as P}from"./SupplyOfficerLayout-t1_o6H_f.js";import{D as R,a as q,b as O,c as $,d as F,e as E}from"./dialog-B-8tPyTS.js";import{B as f}from"./button-CB7dnezD.js";import{u as B}from"./toaster-CXVNjMK8.js";import{F as T}from"./file-text-C6MrRo_D.js";import{S as I}from"./send-horizontal-C8GCA5Hy.js";import"./Dropdown-xZV24tfn.js";import"./transition-C1HWJ4cq.js";import"./XMarkIcon-D9_a1d4d.js";import"./clipboard-check-CgsoPPti.js";import"./index-B1QWxEnw.js";import"./index-C5HjP7Ae.js";import"./index-Dx72rIg0.js";import"./index-Q9sHF5H1.js";function te({purchaseOrder:u,inventoryItem:n,user:i}){var h,y,g;const{toast:p}=B(),s=u.detail,a=(h=s==null?void 0:s.pr_detail)==null?void 0:h.purchase_request,m=(y=s==null?void 0:s.pr_detail)==null?void 0:y.product,j=a?`${a.focal_person.firstname} ${a.focal_person.middlename} ${a.focal_person.lastname}`:"N/A",{data:r,setData:d,post:v,processing:x,errors:b,reset:N}=S({po_id:s.po_id,par_number:u.po_number,received_by:((g=a==null?void 0:a.focal_person)==null?void 0:g.id)??"",issued_by:i.id,remarks:"",date_acquired:new Date().toISOString().split("T")[0],items:[{inventory_item_id:n.id,quantity:(s==null?void 0:s.quantity)??0,unit_cost:n.unit_cost??0,total_cost:((s==null?void 0:s.quantity)??0)*(n.unit_cost??0),property_no:""}]}),w=m?`${m.name} (${m.specs})`:"N/A",[_,o]=A.useState(!1),k=t=>{t.preventDefault(),o(!0)},C=()=>{v(route("supply_officer.store_par"),{preserveScroll:!0,onSuccess:()=>{p({title:"Success",description:"PAR has been saved successfully!"}),o(!1),N()},onError:()=>{p({variant:"destructive",title:"Error",description:"Failed to save PAR. Please check the form."}),o(!1)}})},c=(t,l)=>{d("items",[{...r.items[0],[t]:l,total_cost:t==="quantity"?l*r.items[0].unit_cost:t==="unit_cost"?r.items[0].quantity*l:r.items[0].total_cost}])};return e.jsxs(P,{header:"Schools Divisions Office - Ilagan | Property Acknowledgement Receipt",children:[e.jsx(D,{title:"PAR Form"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 bg-white text-blue-800 border border-blue-300 text-sm font-semibold rounded-md hover:bg-blue-100 hover:border-blue-400 mr-4 mb-4 shadow-sm transition",children:"← Back"}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsxs("h2",{className:"text-3xl font-bold text-blue-800 mb-1 flex items-center gap-2",children:[e.jsx(T,{size:24})," Property Acknowledgement Receipt (PAR)"]}),Object.keys(b).length>0&&e.jsx("div",{className:"col-span-2 bg-red-100 text-red-700 p-4 rounded mb-4",children:e.jsx("ul",{className:"list-disc list-inside",children:Object.entries(b).map(([t,l])=>e.jsx("li",{children:l},t))})}),e.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("input",{type:"hidden",name:"po_id",value:r.po_id}),e.jsxs("div",{className:"p-5 border rounded-md bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:"Item Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"PAR No."}),e.jsx("input",{type:"text",value:r.par_number,onChange:t=>d("par_number",t.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Item"}),e.jsx("input",{value:w,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("input",{type:"number",value:r.items[0].quantity,onChange:t=>c("quantity",Number(t.target.value)),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Cost"}),e.jsx("input",{type:"number",value:r.items[0].unit_cost,onChange:t=>c("unit_cost",Number(t.target.value)),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Cost"}),e.jsx("input",{type:"text",value:r.items[0].total_cost.toFixed(2),readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50"})]})]})]}),e.jsxs("div",{className:"p-5 border rounded-md bg-green-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-4",children:"Acknowledgement"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Received By"}),e.jsx("input",{type:"text",value:j,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Issued By"}),e.jsx("input",{type:"text",value:`${i.firstname} ${i.middlename} ${i.lastname}`,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property No."}),e.jsx("input",{type:"text",value:r.items[0].property_no,onChange:t=>c("property_no",t.target.value),placeholder:"Enter property number",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date Acquired"}),e.jsx("input",{type:"date",value:r.date_acquired,onChange:t=>d("date_acquired",t.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),e.jsx("textarea",{value:r.remarks,onChange:t=>d("remarks",t.target.value),rows:"3",placeholder:"Enter remarks (optional)",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]})]})]}),e.jsx("div",{className:"col-span-full flex justify-end mt-4",children:e.jsxs("button",{type:"submit",disabled:x,className:"inline-flex items-center px-6 py-2 bg-blue-700 text-white text-sm font-medium rounded-md hover:bg-blue-800 transition disabled:opacity-50",children:[e.jsx(I,{size:16,className:"mr-2"}),"Save PAR"]})})]})]}),e.jsx(R,{open:_,onOpenChange:o,children:e.jsxs(q,{children:[e.jsxs(O,{children:[e.jsx($,{children:"Confirm Save"}),e.jsx(F,{children:"Are you sure you want to save this Property Acknowledgement Receipt (PAR)?"})]}),e.jsxs(E,{children:[e.jsx(f,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(f,{onClick:C,disabled:x,children:"Confirm Save"})]})]})})]})}export{te as default};
