import{b as j,u as y,a,j as e,H as v}from"./app-duXzzImO.js";import{S as N}from"./SupplyOfficerLayout-DAWeFtbK.js";import{D as _,a as w,b as S,c as D,d as C,e as P}from"./dialog-DS-DoP21.js";import{B as O}from"./button-D0lWBgCo.js";import{C as q}from"./clipboard-check-BvuVqT1z.js";import{P as A}from"./printer-check-C7ueVJzn.js";import{C as k}from"./circle-check-CD50_B1L.js";import"./toaster-JLrAUcr0.js";import"./use-toast-D7hdoR5h.js";import"./index-CoOSbRev.js";import"./index-CSqca6Ux.js";import"./createLucideIcon-CoZQ0qwL.js";import"./utils-C5BPRwjQ.js";import"./index-CceKmL_e.js";import"./Dropdown-BojfYhBj.js";import"./transition-Bfb6yI_i.js";import"./XMarkIcon-Ck-zhzh-.js";import"./package-check-B7ZPt8qY.js";import"./trash-DrTsnkm2.js";import"./index-3jnUzLIS.js";function Z({purchaseOrders:i,filters:l}){const{props:o}=j(),{data:r,setData:c,get:d}=y({search:l.search||"",division:l.division||""}),[f,n]=a.useState(!1),[g,b]=a.useState("");return a.useEffect(()=>{const s=o.flash.success;s&&(b(s),n(!0))},[o.flash.success]),console.log(o.flash.success),a.useEffect(()=>{const s=setTimeout(()=>{d(route("supply_officer.purchase_orders_table"),{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[r.search,r.division]),e.jsxs(N,{header:"Schools Divisions Office - Ilagan | Purchase Orders",children:[e.jsx(v,{title:"Purchase Orders"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"All Purchase Orders"}),e.jsxs("form",{onSubmit:s=>s.preventDefault(),className:"flex flex-wrap gap-3",children:[e.jsx("input",{type:"text",placeholder:"Search PO number or focal person",value:r.search,onChange:s=>c("search",s.target.value),className:"w-72 border border-gray-300 px-4 py-2 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"}),e.jsxs("select",{value:r.division,onChange:s=>c("division",s.target.value),className:"border border-gray-300 px-10 py-2 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Divisions"}),l.divisions.map(s=>e.jsx("option",{value:s.id,children:s.division},s.id))]})]})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white",children:e.jsxs("table",{className:"w-full table-auto text-sm divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["PO Number","Focal Person","Supplier","Division","Status","Actions"].map(s=>e.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-600 uppercase tracking-wide text-center whitespace-nowrap",children:s},s))})}),e.jsx("tbody",{className:"divide-y divide-gray-100 text-center",children:i.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"py-12 text-gray-500 text-lg font-medium",children:"No Purchase Orders found."})}):i.data.map(s=>{var t,u,p,m,x,h;return e.jsxs("tr",{className:"hover:bg-blue-50 transition duration-200 whitespace-nowrap",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-blue-700",children:s.po_number}),e.jsx("td",{className:"px-6 py-4",children:(u=(t=s.rfq)==null?void 0:t.purchase_request)!=null&&u.focal_person?`${s.rfq.purchase_request.focal_person.firstname} ${s.rfq.purchase_request.focal_person.middlename} ${s.rfq.purchase_request.focal_person.lastname}`:"N/A"}),e.jsx("td",{className:"px-6 py-4",children:((p=s.supplier)==null?void 0:p.company_name)??"N/A"}),e.jsx("td",{className:"px-6 py-4",children:((h=(x=(m=s.rfq)==null?void 0:m.purchase_request)==null?void 0:x.division)==null?void 0:h.division)||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 text-gray-700 text-xs font-semibold",children:s.status})}),e.jsxs("td",{className:"px-6 py-4 flex gap-2 justify-center",children:[!s.iar&&e.jsxs("a",{href:route("supply_officer.record_iar",s.id),className:"inline-flex items-center gap-1 px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition",children:[e.jsx(q,{size:16})," Record IAR"]}),e.jsxs("a",{href:route("supply_officer.print_po",s.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-600 text-white text-xs font-medium rounded-md hover:bg-blue-700 transition",target:"_blank",children:[e.jsx(A,{size:16})," Print PO"]})]})]},s.id)})})]})}),e.jsx("div",{className:"mt-6 flex justify-center flex-wrap gap-2",children:i.links.map((s,t)=>e.jsx("button",{disabled:!s.url,onClick:()=>s.url&&d(s.url,{data:r,preserveState:!0,preserveScroll:!0}),className:`px-3 py-1 text-sm border rounded-md ${s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,dangerouslySetInnerHTML:{__html:s.label}},t))}),e.jsx(_,{open:f,onOpenChange:n,children:e.jsxs(w,{children:[e.jsxs(S,{children:[e.jsxs(D,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(k,{size:24}),"Success!"]}),e.jsx(C,{className:"pt-4 text-base",children:g})]}),e.jsx(P,{children:e.jsx(O,{onClick:()=>n(!1),children:"OK"})})]})})]})}export{Z as default};
