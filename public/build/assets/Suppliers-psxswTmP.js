import{a as i,u as g,j as t,H as B,c as d}from"./app-CtTXRvSW.js";import{I as y}from"./input-C6sjfcxT.js";import{S as L}from"./SupplyOfficerLayout-BkfKkaPs.js";import{D as v,a as b,b as f,c as j,d as w,e as _}from"./dialog-Bx8Sq_PR.js";import{B as c}from"./button-BXv_ZNaU.js";import{u as P}from"./use-toast-n7ss-q37.js";import{F as z}from"./PencilSquareIcon-CYPeK2bz.js";import{F as V}from"./TrashIcon-DLDWxxtX.js";import"./utils-_QWm-tM-.js";import"./index-Bhk03iWx.js";import"./toaster-BHX75O9a.js";import"./index-Dow8KyZk.js";import"./createLucideIcon-BS5JQiMA.js";import"./index-ClPfL8xw.js";import"./Dropdown-BOTfWPms.js";import"./transition-CwMeo9Sp.js";import"./XMarkIcon-B3-C-RCN.js";import"./clipboard-check-CQy8bL28.js";import"./package-check-BilTQm-G.js";import"./trash-CMtWkb3K.js";import"./index-B2vGw--Q.js";function Z({title:s,titleId:r,...n},p){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":r},n),s?i.createElement("title",{id:r},s):null,i.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const q=i.forwardRef(Z);function he({filters:s,records:r}){var C,D,A,E;const{toast:n}=P(),{data:p,setData:S}=g({search:(s==null?void 0:s.search)||"",page:(s==null?void 0:s.page)||1}),o=g({company_name:"",address:"",tin_num:"",representative_name:"",contact_number:"",email:""}),u=g({company_name:"",address:"",tin_num:"",representative_name:"",contact_number:"",email:""}),[N,m]=i.useState(null),[$,h]=i.useState(!1),[l,k]=i.useState(null),[F,x]=i.useState(!1),T=e=>{S("search",e),d.get(route("supply_officer.suppliers"),{search:e},{preserveState:!0,replace:!0})},O=e=>{S("page",e),d.get(route("supply_officer.suppliers"),{search:p.search,page:e},{preserveState:!0,replace:!0})},I=e=>{m(e),o.setData({company_name:e.company_name,address:e.address,tin_num:e.tin_num,representative_name:e.representative_name,contact_number:e.contact_number||"",email:e.email||""})},R=()=>{o.put(route("supply_officer.update_supplier",N.id),{onSuccess:()=>{m(null),d.get(route("supply_officer.suppliers"),{preserveState:!0}),n({title:"Supplier Updated",description:`${o.data.company_name} has been successfully updated.`,variant:"default"})},onError:()=>n({title:"Update Failed",description:"There was an error updating the supplier.",variant:"destructive"})})},U=()=>{u.post(route("supply_officer.add_supplier"),{onSuccess:()=>{h(!1),u.reset(),d.get(route("supply_officer.suppliers"),{preserveState:!0}),n({title:"Supplier Added",description:"The new supplier has been successfully added.",variant:"default"})},onError:()=>n({title:"Add Failed",description:"There was an error adding the supplier.",variant:"destructive"})})},H=()=>{if(l){const e=r.data.find(M=>M.id===l),a=(e==null?void 0:e.status)==="inactive";d.put(route(a?"supply_officer.activate_supplier":"supply_officer.delete_supplier",l),{},{preserveState:!0,onSuccess:()=>{x(!1),n({title:a?"Supplier Activated":"Supplier Marked as Inactive",description:a?"The supplier has been successfully activated.":"The supplier has been successfully marked as inactive.",variant:"default"})},onError:()=>{n({title:"Action Failed",description:a?"Unable to activate supplier.":"Unable to mark supplier as inactive.",variant:"destructive"})}})}};return t.jsxs(L,{header:"Suppliers",children:[t.jsx(B,{title:"Suppliers"}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4",children:[t.jsx("div",{className:"flex items-center gap-3 justify-between",children:t.jsx("h2",{className:"text-3xl font-semibold text-gray-800",children:"Suppliers"})}),t.jsxs("form",{onSubmit:e=>e.preventDefault(),className:"flex gap-3",children:[t.jsxs(c,{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-5",children:[t.jsx(q,{className:"w-4 h-4 mr-1"})," Add Supplier"]}),t.jsx(y,{type:"text",placeholder:"Search by company name or representative name...",value:p.search,onChange:e=>T(e.target.value),className:"px-6 py-5 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 w-96 bg-white"})]})]}),t.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white",children:t.jsxs("table",{className:"min-w-full table-auto text-sm divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["#","Company Name","Address","Tin Number","Representative Name","Contact Number","Email","Status","Actions"].map(e=>t.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-600 uppercase tracking-wide text-left",children:e},e))})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:r.data.map(e=>{const a=e.status==="inactive";return t.jsxs("tr",{className:`transition-colors ${a?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("td",{className:`px-6 py-4 ${a?"text-gray-400 line-through opacity-70":""}`,children:r.data.indexOf(e)+1}),t.jsx("td",{className:`px-6 py-4 font-semibold whitespace-nowrap ${a?"text-gray-400 line-through opacity-70":"text-blue-700"}`,children:e.company_name}),t.jsx("td",{className:`px-6 py-4 ${a?"text-gray-400 line-through opacity-70":""}`,children:e.address}),t.jsx("td",{className:`px-6 py-4 ${a?"text-gray-400 line-through opacity-70":""}`,children:e.tin_num}),t.jsx("td",{className:`px-6 py-4 ${a?"text-gray-400 line-through opacity-70":""}`,children:e.representative_name}),t.jsx("td",{className:`px-6 py-4 ${a?"text-gray-400 line-through opacity-70":""}`,children:e.contact_number}),t.jsx("td",{className:`px-6 py-4 ${a?"text-gray-400 line-through opacity-70":""}`,children:e.email}),t.jsx("td",{className:`px-6 py-4 capitalize ${a?"text-gray-400 line-through opacity-70":""}`,children:e.status}),t.jsxs("td",{className:"px-6 py-4 flex gap-2 justify-center items-center",children:[t.jsxs("button",{onClick:()=>I(e),disabled:a,className:`inline-flex items-center px-3 py-2 rounded-md ${a?"bg-gray-400 text-white cursor-not-allowed hidden":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[t.jsx(z,{className:"w-4 h-4 mr-1"})," Edit"]}),t.jsxs("button",{onClick:()=>{k(e.id),x(!0)},className:`inline-flex items-center px-3 py-2 rounded-md ${a?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"}`,children:[t.jsx(V,{className:"w-4 h-4 mr-1"}),a?"Activate":"Delete"]})]})]},e.id)})})]})}),t.jsx("div",{className:"mt-6 flex justify-center flex-wrap gap-1",children:r.links.map((e,a)=>t.jsx("button",{disabled:!e.url,onClick:()=>e.url&&O(e.url.split("page=")[1]),className:`px-3 py-1 text-sm border rounded-md ${e.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,dangerouslySetInnerHTML:{__html:e.label}},a))}),t.jsx(v,{open:$,onOpenChange:h,children:t.jsxs(b,{children:[t.jsxs(f,{children:[t.jsx(j,{children:"Add Supplier"}),t.jsx(w,{children:"Enter the supplier's details below."})]}),t.jsx("div",{className:"space-y-3",children:["company_name","address","tin_num","representative_name","contact_number","email"].map(e=>t.jsx(y,{placeholder:e.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),value:u.data[e],onChange:a=>u.setData(e,a.target.value)},e))}),t.jsxs(_,{children:[t.jsx(c,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),t.jsx(c,{onClick:U,children:"Add Supplier"})]})]})}),t.jsx(v,{open:N!==null,onOpenChange:e=>!e&&m(null),children:t.jsxs(b,{children:[t.jsxs(f,{children:[t.jsx(j,{children:"Edit Supplier"}),t.jsx(w,{children:"Modify the supplier's details below."})]}),t.jsx("div",{className:"space-y-3",children:["company_name","address","tin_num","representative_name","contact_number","email"].map(e=>t.jsx(y,{placeholder:e.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),value:o.data[e],onChange:a=>o.setData(e,a.target.value)},e))}),t.jsxs(_,{children:[t.jsx(c,{variant:"outline",onClick:()=>m(null),children:"Cancel"}),t.jsx(c,{onClick:R,children:"Save Changes"})]})]})}),t.jsx(v,{open:F,onOpenChange:x,children:t.jsxs(b,{children:[t.jsxs(f,{children:[t.jsx(j,{children:((C=r.data.find(e=>e.id===l))==null?void 0:C.status)==="inactive"?"Activate Supplier":"Confirm Deactivation"}),t.jsx(w,{children:((D=r.data.find(e=>e.id===l))==null?void 0:D.status)==="inactive"?"Are you sure you want to activate this supplier? They will become available again.":"Are you sure you want to mark this supplier as inactive? They wonâ€™t be available for transactions."})]}),t.jsxs(_,{children:[t.jsx(c,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),t.jsx(c,{onClick:H,className:((A=r.data.find(e=>e.id===l))==null?void 0:A.status)==="inactive"?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white",children:((E=r.data.find(e=>e.id===l))==null?void 0:E.status)==="inactive"?"Activate":"Confirm"})]})]})})]})}export{he as default};
