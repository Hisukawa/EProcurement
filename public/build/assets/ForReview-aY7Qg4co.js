import{r as s,b as g,j as e,H as y}from"./app-zVUDkyzP.js";import{A as v}from"./ApproverLayout-qR23ynfN.js";import{T as b}from"./Tooltip-CZd3Z6l2.js";import{c as f}from"./createLucideIcon-B0te037c.js";import{F as j}from"./XMarkIcon-CiGnVPuc.js";import"./Dropdown-zT0pG-PO.js";import"./transition-DqO-TKob.js";import"./toaster-D8SHsd9C.js";import"./use-toast-SfBWm5Kp.js";import"./index-B_sYnd9c.js";import"./index-DtDLCPOc.js";import"./index-Dzx9dIXH.js";import"./index-CG4CbV8-.js";import"./ClipboardDocumentIcon-BqEH_Tgv.js";import"./clipboard-check-DUrY4GM2.js";import"./circle-check-big-BbEj1EZg.js";import"./file-text-BqCg1eio.js";import"./BellAlertIcon-Dm10OwNq.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N=f("eye",w);function q({sentPurchaseRequests:d,filters:a={},flash:c}){const[n,m]=s.useState(null),[x,r]=s.useState(!1),[o,p]=s.useState(a.prNumber||""),[i,u]=s.useState(a.focalPerson||""),[l,h]=s.useState(a.division||"");return s.useEffect(()=>{const t=setTimeout(()=>{g.get(route("bac_approver.for_review"),{prNumber:o,focalPerson:i,division:l},{preserveState:!0,preserveScroll:!0,replace:!0})},400);return()=>clearTimeout(t)},[o,i,l]),e.jsxs(v,{header:"Schools Division Office - Ilagan | For Review",flash:c,children:[e.jsx(y,{title:"PRs For Review"}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Purchase Requests For Review"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsx("input",{type:"text",value:o,onChange:t=>p(t.target.value),placeholder:"Search PR Number...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsx("input",{type:"text",value:i,onChange:t=>u(t.target.value),placeholder:"Search Focal Person...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsxs("select",{value:l,onChange:t=>h(t.target.value),className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-44",children:[e.jsx("option",{value:"",children:"All Divisions"}),e.jsx("option",{value:"1",children:"SGOD"}),e.jsx("option",{value:"2",children:"OSDS"}),e.jsx("option",{value:"3",children:"CID"})]})]}),d.data.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No purchase requests ready for review."}):e.jsx("div",{className:"overflow-x-auto rounded-md border border-gray-200 shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsx("tr",{children:["PR Number","Focal Person","Division","Purpose","Status","Date Sent","Action"].map(t=>e.jsx("th",{className:"px-6 py-3 text-center font-semibold uppercase tracking-wider text-xs",children:t},t))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:d.data.map(t=>e.jsxs("tr",{className:"text-center hover:bg-indigo-50 transition",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-indigo-600",children:e.jsx(b,{to:route("bac_approver.show_details",t.id),tooltip:"View PR details",className:"hover:underline focus:underline",children:t.pr_number})}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:[t.focal_person.firstname,t.focal_person.middlename,t.focal_person.lastname].filter(Boolean).join(" ")}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:t.division.division}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:t.purpose}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.status.toLowerCase()==="approved"?"bg-green-100 text-green-800":t.status.toLowerCase()==="pending"?"bg-yellow-100 text-yellow-800":t.status.toLowerCase()==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono text-sm whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 flex space-x-2 justify-center",children:e.jsx("button",{onClick:()=>{m(`/storage/${t.approval_image}`),r(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm shadow",children:e.jsx(N,{})})})]},t.id))})]})}),x&&n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4",onClick:()=>r(!1),children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-auto",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 text-gray-600 hover:text-gray-900",children:e.jsx(j,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 p-4 border-b",children:"Approved Form"}),e.jsx("img",{src:n,alt:"Approved Form",className:"w-full h-auto object-contain rounded-b-lg p-4"})]})})]})]})}export{q as default};
