import{r as o,b as p,j as e,H as N}from"./app-zVUDkyzP.js";import{A as w}from"./ApproverLayout-qR23ynfN.js";import{T as _}from"./Tooltip-CZd3Z6l2.js";import"./Dropdown-zT0pG-PO.js";import"./transition-DqO-TKob.js";import"./toaster-D8SHsd9C.js";import"./use-toast-SfBWm5Kp.js";import"./index-B_sYnd9c.js";import"./index-DtDLCPOc.js";import"./createLucideIcon-B0te037c.js";import"./index-Dzx9dIXH.js";import"./index-CG4CbV8-.js";import"./XMarkIcon-CiGnVPuc.js";import"./ClipboardDocumentIcon-BqEH_Tgv.js";import"./clipboard-check-DUrY4GM2.js";import"./circle-check-big-BbEj1EZg.js";import"./file-text-BqCg1eio.js";import"./BellAlertIcon-Dm10OwNq.js";function M({purchaseRequests:i,filters:l={}}){const[n,h]=o.useState(l.prNumber||""),[d,g]=o.useState(l.focalPerson||""),[c,y]=o.useState(l.division||"");return o.useEffect(()=>{const t=setTimeout(()=>{p.get(route("bac_approver.for_quotations"),{prNumber:n,focalPerson:d,division:c},{preserveState:!0,preserveScroll:!0,replace:!0})},400);return()=>clearTimeout(t)},[n,d,c]),e.jsxs(w,{header:"Schools Divisions Office - Ilagan | Purchase Requests",children:[e.jsx(N,{title:"Purchase Requests for Quotation"}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Purchase Requests for Quotation"}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:t=>h(t.target.value),placeholder:"Search PR Number...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsx("input",{type:"text",value:d,onChange:t=>g(t.target.value),placeholder:"Search Focal Person...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsxs("select",{value:c,onChange:t=>y(t.target.value),className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-44",children:[e.jsx("option",{value:"",children:"All Divisions"}),e.jsx("option",{value:"1",children:"SGOD"}),e.jsx("option",{value:"2",children:"OSDS"}),e.jsx("option",{value:"3",children:"CID"})]})]})}),i.data.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No Purchase Request found"}):e.jsxs("div",{className:"overflow-x-auto rounded-md border border-gray-200 shadow-sm bg-white",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsx("tr",{className:"text-center",children:["PR Number","Focal Person","Division","Item","Specs","Unit","Quantity","Total Price","Actions"].map(t=>e.jsx("th",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wider",children:t},t))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100 text-center",children:i.data.map(t=>{var u;const a=t.details.map(s=>s.item),m=t.details.map(s=>s.unit);t.details.map(s=>s.specs);const x=t.details.map(s=>s.quantity),j=t.details.reduce((s,r)=>s+r.unit_price*r.quantity,0),b=a.slice(0,2).join(", "),f=a.length>2?` +${a.length-2} more`:"";return e.jsxs("tr",{className:"hover:bg-blue-50",children:[e.jsx("td",{className:"px-4 py-2 font-semibold",children:t.rfqs&&t.rfqs.length>0?e.jsx(_,{to:route("bac_approver.abstract_of_quotations",t.id),tooltip:"View Abstract of Quotations",className:"text-indigo-600 hover:underline",children:t.pr_number}):e.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[e.jsx("span",{className:"cursor-not-allowed",children:t.pr_number}),e.jsx("small",{className:"text-xs italic text-red-500",children:"No quotations submitted"})]})}),e.jsx("td",{className:"px-4 py-2 text-gray-700",children:[t.focal_person.firstname,t.focal_person.middlename,t.focal_person.lastname].filter(Boolean).join(" ")}),e.jsx("td",{className:"px-4 py-2 text-gray-700",children:t.division.division}),e.jsxs("td",{className:"px-4 py-2 text-gray-700",children:[b,f]}),e.jsx("td",{className:"px-4 py-2 text-left",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.details.slice(0,2).map((s,r)=>e.jsx("li",{children:s.specs},r)),t.details.length>2&&e.jsxs("li",{className:"text-gray-500 italic",children:["+",t.details.length-2," more"]})]})}),e.jsxs("td",{className:"px-4 py-2 text-gray-700",children:[m.slice(0,2).join(", "),m.length>2?` +${m.length-2} more`:""]}),e.jsxs("td",{className:"px-4 py-2 text-gray-700",children:[x.slice(0,2).join(", "),x.length>2?` +${x.length-2} more`:""]}),e.jsxs("td",{className:"px-4 py-2 text-gray-700",children:["â‚±",j.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2",children:(u=t.rfqs)!=null&&u.some(s=>{var r;return(r=s.details)==null?void 0:r.some(v=>v.is_winner)})?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{disabled:!0,className:"inline-flex items-center px-4 py-2 bg-gray-400 text-white text-sm font-medium rounded-md cursor-not-allowed",children:"Enter Quoted Price"}),e.jsx("small",{className:"text-xs text-red-500 mt-1 text-center",children:"Winner already selected"})]}):e.jsx("a",{href:route("bac_approver.quoted_price",t.id),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition",children:"Enter Quoted Price"})})]},t.id)})})]}),i.links.length>1&&e.jsx("div",{className:"flex justify-center items-center gap-2 my-6 flex-wrap",children:i.links.map((t,a)=>e.jsx("button",{disabled:!t.url,onClick:()=>t.url&&p.visit(t.url,{preserveScroll:!0,preserveState:!0}),className:`px-4 py-2 text-sm rounded-md border transition ${t.active?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 hover:bg-gray-100 border-gray-300"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},a))})]})]})]})}export{M as default};
